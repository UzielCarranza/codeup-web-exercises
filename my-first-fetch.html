<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Title</title>
    <style>

        body{
            margin: 2em;
        }
        .country--selection{
            margin: 2em;
        }
        #cost-living{
            margin-bottom: 2em;
        }
        #section{
            margin-bottom: 4em;
        }
    </style>


</head>
<body>

<div id="weather"></div>

<div id="cost-living">
</div>

<section id="section"></section>
<div class="section"></div>

<label for="search">Look for cities: </label>
<input id="search" type="text" placeholder="type here...">
<button class="btn">search</button>
<div class="country--selection">
    <ul class="addMe"></ul>
</div>


<script src="js/keys.js"></script>

<script src="https://code.jquery.com/jquery-2.2.4.min.js"
        integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script>

    //do fetch stuff

    //make request
    // let lat = 33.44;
    // let lan = 94.04;
    // let units = "Imperial"

    // fetch("https://api.openweathermap.org/data/2.5/onecall?lat=" + lat + "&lon=" + lan + "&units=" + units + "&appid=" + OWM_KEY)
    //after response
    //     .then(response => response.json())
    //
    //     .then(data => {
    //         console.log(data.daily)
    //         let html = "";
    //         html += '<ul>'
    //         for (let i = 0; i < 5; i++){
    //             let dailyTemp = data.daily[i].temp.day;
    //             html += '<li>' + dailyTemp + '</li>' ;
    //         }
    //         html += '</ul>'
    //         $('#weather').html(html)
    //
    //     });

    // https://api.openweathermap.org/data/2.5/onecall?lat=33.44&lon=-94.04&exclude=hourly,daily&appid={API key}

    fetch("https://cost-of-living-and-prices.p.rapidapi.com/cities", {
        "method": "GET",
        "headers": {
            "x-rapidapi-host": "cost-of-living-and-prices.p.rapidapi.com",
            "x-rapidapi-key": COL_P_KEY
        }
    })
        .then(response => response.json()
        )
        .then(data => {
            // console.log(data.cities[0])

            let html = "";
            html += '<h1>'
            let cities = data.cities[0].city_name;
            html += cities;
            html += '</h1>'
            $('#cost-living').html(html)
/// li portion
            let location = ""
            let ulHtml = "";
            ulHtml += '<ul>'
            let countryName = data.cities[0].country_name
            let countryLng = data.cities[0].lng
            let countryLat = data.cities[0].lat
            ulHtml = '<li>' + "country: " + countryName + '</li>' +
                '<li>' + "location: " + countryLng + countryLat + '</li>'
            ulHtml += '</ul>'
            $('#section').html(ulHtml)

            $('#search').keyup(function (e) {

                e.preventDefault()
                let userInput = $('#search').val();

                    //
                    let sectionDiv = '';
                    let sectionDivCities;
                    let sectionsDivsCountryes;
                    for (let i = 0; i < 8000; i++) {
                        sectionDivCities = data.cities[i].city_name;
                        sectionsDivsCountryes = data.cities[i].country_name
                        let newCitiesArray = [];
                        if (sectionDivCities.toLowerCase().startsWith(userInput)) {
                            newCitiesArray.push(sectionDivCities)
                            for (let i in newCitiesArray) {
                                var appendThis = "<li>" + 'the city of: ' + '<strong>' + newCitiesArray[i] + '</strong>' + ' is located in  the country of: ' + sectionsDivsCountryes + "</li>"
                                $('.addMe').html(appendThis)
                            }

                        }
                    }
            })
        })





</script>
</body>
</html>